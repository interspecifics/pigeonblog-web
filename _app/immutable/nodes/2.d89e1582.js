import{i as ge,f as be,h as z,j as ke,s as he,n as P,o as Ee}from"../chunks/scheduler.4b895fe1.js";import{p as me,t as H,b as _e,d as B,S as de,i as fe,g as E,m as v,s as F,h as D,j as $,n as g,f,c as Z,k as N,a as j,x as d,y as pe,o as O,e as le,z as ve,A as ne,l as De,r as $e,u as we,v as Ie,w as Oe,B as je}from"../chunks/index.50a48fb0.js";function ae(s,e){const a=e.token={};function t(l,r,n,c){if(e.token!==a)return;e.resolved=c;let o=e.ctx;n!==void 0&&(o=o.slice(),o[n]=c);const u=l&&(e.current=l)(o);let h=!1;e.block&&(e.blocks?e.blocks.forEach((i,m)=>{m!==r&&i&&(me(),H(i,1,1,()=>{e.blocks[m]===i&&(e.blocks[m]=null)}),_e())}):e.block.d(1),u.c(),B(u,1),u.m(e.mount(),e.anchor),h=!0),e.block=u,e.blocks&&(e.blocks[r]=u),h&&ke()}if(ge(s)){const l=be();if(s.then(r=>{z(l),t(e.then,1,e.value,r),z(null)},r=>{if(z(l),t(e.catch,2,e.error,r),z(null),!e.hasCatch)throw r}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,s),!0;e.resolved=s}}function Ce(s,e,a){const t=e.slice(),{resolved:l}=s;s.current===s.then&&(t[s.value]=l),s.current===s.catch&&(t[s.error]=l),s.block.p(t,a)}function G(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Se(s){let e,a,t=s[2](s[0].timestamp)+"",l,r,n,c,o,u=s[0].pigeon+"",h,i,m,_,w=s[1](s[0].lat)+"",C,U,I=s[1](s[0].lon)+"",y,J,K,k,Q,R=s[0].NH3+"",X,W,T=s[0].OXI+"",q,Y,A=s[0].RED+"",M,x,te;return{c(){e=E("div"),a=E("button"),l=v(t),r=F(),n=E("div"),c=E("div"),o=v("Pigeon: "),h=v(u),i=F(),m=E("div"),_=v("Loc: ("),C=v(w),U=v(", "),y=v(I),J=v(")"),K=F(),k=E("div"),Q=v("NH3: "),X=v(R),W=v(", OXI: "),q=v(T),Y=v(", RED: "),M=v(A),this.h()},l(p){e=D(p,"DIV",{class:!0});var b=$(e);a=D(b,"BUTTON",{class:!0});var se=$(a);l=g(se,t),se.forEach(f),r=Z(b),n=D(b,"DIV",{class:!0});var L=$(n);c=D(L,"DIV",{class:!0});var ee=$(c);o=g(ee,"Pigeon: "),h=g(ee,u),ee.forEach(f),i=Z(L),m=D(L,"DIV",{class:!0});var V=$(m);_=g(V,"Loc: ("),C=g(V,w),U=g(V,", "),y=g(V,I),J=g(V,")"),V.forEach(f),K=Z(L),k=D(L,"DIV",{class:!0});var S=$(k);Q=g(S,"NH3: "),X=g(S,R),W=g(S,", OXI: "),q=g(S,T),Y=g(S,", RED: "),M=g(S,A),S.forEach(f),L.forEach(f),b.forEach(f),this.h()},h(){N(a,"class","card-title svelte-1igr9mo"),N(c,"class",""),N(m,"class",""),N(k,"class",""),N(n,"class","card-content hide svelte-1igr9mo"),N(e,"class","card-container svelte-1igr9mo")},m(p,b){j(p,e,b),d(e,a),d(a,l),d(e,r),d(e,n),d(n,c),d(c,o),d(c,h),d(n,i),d(n,m),d(m,_),d(m,C),d(m,U),d(m,y),d(m,J),d(n,K),d(n,k),d(k,Q),d(k,X),d(k,W),d(k,q),d(k,Y),d(k,M),x||(te=pe(a,"click",s[3]),x=!0)},p(p,[b]){b&1&&t!==(t=p[2](p[0].timestamp)+"")&&O(l,t),b&1&&u!==(u=p[0].pigeon+"")&&O(h,u),b&1&&w!==(w=p[1](p[0].lat)+"")&&O(C,w),b&1&&I!==(I=p[1](p[0].lon)+"")&&O(y,I),b&1&&R!==(R=p[0].NH3+"")&&O(X,R),b&1&&T!==(T=p[0].OXI+"")&&O(q,T),b&1&&A!==(A=p[0].RED+"")&&O(M,A)},i:P,o:P,d(p){p&&f(e),x=!1,te()}}}function Ne(s,e,a){let{measurement:t}=e;const l=c=>c.toFixed(4),r=c=>new Date(c).toISOString(),n=c=>{var h;const u=(h=c.target.parentNode)==null?void 0:h.querySelector(".card-content");u==null||u.classList.toggle("hide")};return s.$$set=c=>{"measurement"in c&&a(0,t=c.measurement)},[t,l,r,n]}class Pe extends de{constructor(e){super(),fe(this,e,Ne,Se,he,{measurement:0})}}function oe(s,e,a){const t=s.slice();return t[8]=e[a],t}function ce(s,e,a){const t=s.slice();return t[12]=e[a],t}function re(s){let e,a=s[3](s[12])+"",t,l;return{c(){e=E("option"),t=v(a),this.h()},l(r){e=D(r,"OPTION",{});var n=$(e);t=g(n,a),n.forEach(f),this.h()},h(){e.__value=l=s[12],ne(e,e.__value)},m(r,n){j(r,e,n),d(e,t)},p(r,n){n&1&&a!==(a=r[3](r[12])+"")&&O(t,a),n&1&&l!==(l=r[12])&&(e.__value=l,ne(e,e.__value))},d(r){r&&f(e)}}}function ye(s){let e,a=s[11].message+"",t;return{c(){e=E("p"),t=v(a),this.h()},l(l){e=D(l,"P",{style:!0});var r=$(e);t=g(r,a),r.forEach(f),this.h()},h(){De(e,"color","red")},m(l,r){j(l,e,r),d(e,t)},p(l,r){r&2&&a!==(a=l[11].message+"")&&O(t,a)},i:P,o:P,d(l){l&&f(e)}}}function Le(s){let e,a,t=G(s[7]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ue(oe(s,t,n));const r=n=>H(l[n],1,1,()=>{l[n]=null});return{c(){e=E("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=D(n,"DIV",{class:!0});var c=$(e);for(let o=0;o<l.length;o+=1)l[o].l(c);c.forEach(f),this.h()},h(){N(e,"class","cards-container svelte-1j7en9v")},m(n,c){j(n,e,c);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);a=!0},p(n,c){if(c&2){t=G(n[7]);let o;for(o=0;o<t.length;o+=1){const u=oe(n,t,o);l[o]?(l[o].p(u,c),B(l[o],1)):(l[o]=ue(u),l[o].c(),B(l[o],1),l[o].m(e,null))}for(me(),o=t.length;o<l.length;o+=1)r(o);_e()}},i(n){if(!a){for(let c=0;c<t.length;c+=1)B(l[c]);a=!0}},o(n){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)H(l[c]);a=!1},d(n){n&&f(e),ve(l,n)}}}function ue(s){let e,a;return e=new Pe({props:{measurement:s[8]}}),{c(){$e(e.$$.fragment)},l(t){we(e.$$.fragment,t)},m(t,l){Ie(e,t,l),a=!0},p(t,l){const r={};l&2&&(r.measurement=t[8]),e.$set(r)},i(t){a||(B(e.$$.fragment,t),a=!0)},o(t){H(e.$$.fragment,t),a=!1},d(t){Oe(e,t)}}}function Ve(s){let e,a="...waiting";return{c(){e=E("p"),e.textContent=a},l(t){e=D(t,"P",{"data-svelte-h":!0}),je(e)!=="svelte-mv6tav"&&(e.textContent=a)},m(t,l){j(t,e,l)},p:P,i:P,o:P,d(t){t&&f(e)}}}function Be(s){let e,a,t,l,r,n,c,o=G(s[0]),u=[];for(let i=0;i<o.length;i+=1)u[i]=re(ce(s,o,i));let h={ctx:s,current:null,token:null,hasCatch:!0,pending:Ve,then:Le,catch:ye,value:7,error:11,blocks:[,,,]};return ae(l=s[1],h),{c(){e=E("select");for(let i=0;i<u.length;i+=1)u[i].c();a=F(),t=le(),h.block.c()},l(i){e=D(i,"SELECT",{});var m=$(e);for(let _=0;_<u.length;_+=1)u[_].l(m);m.forEach(f),a=Z(i),t=le(),h.block.l(i)},m(i,m){j(i,e,m);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(e,null);j(i,a,m),j(i,t,m),h.block.m(i,h.anchor=m),h.mount=()=>t.parentNode,h.anchor=t,r=!0,n||(c=pe(e,"change",s[2]),n=!0)},p(i,[m]){if(s=i,m&9){o=G(s[0]);let _;for(_=0;_<o.length;_+=1){const w=ce(s,o,_);u[_]?u[_].p(w,m):(u[_]=re(w),u[_].c(),u[_].m(e,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=o.length}h.ctx=s,m&2&&l!==(l=s[1])&&ae(l,h)||Ce(h,s,m)},i(i){r||(B(h.block),r=!0)},o(i){for(let m=0;m<3;m+=1){const _=h.blocks[m];H(_)}r=!1},d(i){i&&(f(e),f(a),f(t)),ve(u,i),h.block.d(i),h.token=null,h=null,n=!1,c()}}}const ie="https://pigeonblog-db-default-rtdb.firebaseio.com";function Re(s,e,a){const t=async h=>{h=h||1;const i=h+24*60*60*1e3,m=`${ie}/measurements.json`,_=`orderBy="timestamp"&startAt=${h}&endAt=${i}`,C=await(await fetch(`${m}?${_}`)).json();return Object.keys(C).map(I=>C[I]).sort((I,y)=>I.timestamp-y.timestamp)},l=async()=>{const i=await(await fetch(`${ie}/sessions.json`)).json();return Object.keys(i).map(_=>parseInt(_))},r=h=>{const i=h.target;a(4,c=parseInt(i.value))},n=h=>new Date(h).toLocaleDateString("en-us",{timeZone:"UTC",weekday:"long",year:"numeric",month:"short",day:"numeric"});let c=0,o=[],u;return Ee(async()=>{a(0,o=await l()),a(4,c=o[0])}),s.$$.update=()=>{s.$$.dirty&16&&a(1,u=t(c))},[o,u,r,n,c]}class He extends de{constructor(e){super(),fe(this,e,Re,Be,he,{})}}export{He as component};
