import{i as Ve,f as Te,h as te,j as Ae,s as Ie,n as N,o as Le}from"../chunks/scheduler.4b895fe1.js";import{p as Pe,t as J,b as $e,d as U,S as je,i as Oe,g as D,m as p,s as A,h as w,j as P,n as g,f,c as L,k as F,a as I,x as m,y as Se,o as C,e as pe,l as Fe,z as Ne,A as ge,B as de,r as Be,u as Re,v as He,w as Ue}from"../chunks/index.50a48fb0.js";function le(s,e){const o=e.token={};function t(n,l,a,r){if(e.token!==o)return;e.resolved=r;let c=e.ctx;a!==void 0&&(c=c.slice(),c[a]=r);const h=n&&(e.current=n)(c);let b=!1;e.block&&(e.blocks?e.blocks.forEach((i,v)=>{v!==l&&i&&(Pe(),J(i,1,1,()=>{e.blocks[v]===i&&(e.blocks[v]=null)}),$e())}):e.block.d(1),h.c(),U(h,1),h.m(e.mount(),e.anchor),b=!0),e.block=h,e.blocks&&(e.blocks[l]=h),b&&Ae()}if(Ve(s)){const n=Te();if(s.then(l=>{te(n),t(e.then,1,e.value,l),te(null)},l=>{if(te(n),t(e.catch,2,e.error,l),te(null),!e.hasCatch)throw l}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,s),!0;e.resolved=s}}function be(s,e,o){const t=e.slice(),{resolved:n}=s;s.current===s.then&&(t[s.value]=n),s.current===s.catch&&(t[s.error]=n),s.block.p(t,o)}function se(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Xe(s){let e,o,t=new Date(s[0].timestamp).toISOString()+"",n,l,a,r,c,h=s[0].pigeon+"",b,i,v,u,_=s[0].lat.toFixed(4)+"",d,$,B=s[0].lon.toFixed(4)+"",R,X,ne,j,oe,q=s[0].temp.toFixed(2)+"",K,ae,M=s[0].pres.toFixed(2)+"",Q,ce,y=s[0].alti.toFixed(2)+"",W,re,O,ie,z=s[0].NH3+"",Y,ue,Z=s[0].OXI+"",x,he,G=s[0].RED+"",ee,me,fe;return{c(){e=D("div"),o=D("button"),n=p(t),l=A(),a=D("div"),r=D("div"),c=p("Pigeon: "),b=p(h),i=A(),v=D("div"),u=p("Location: ("),d=p(_),$=p(", "),R=p(B),X=p(")"),ne=A(),j=D("div"),oe=p("Temp: "),K=p(q),ae=p(", Press: "),Q=p(M),ce=p(`,
      Alt: `),W=p(y),re=A(),O=D("div"),ie=p("NH3: "),Y=p(z),ue=p(", OXI: "),x=p(Z),he=p(", RED: "),ee=p(G),this.h()},l(E){e=w(E,"DIV",{class:!0});var k=P(e);o=w(k,"BUTTON",{class:!0});var ve=P(o);n=g(ve,t),ve.forEach(f),l=L(k),a=w(k,"DIV",{class:!0});var S=P(a);r=w(S,"DIV",{class:!0});var _e=P(r);c=g(_e,"Pigeon: "),b=g(_e,h),_e.forEach(f),i=L(S),v=w(S,"DIV",{class:!0});var H=P(v);u=g(H,"Location: ("),d=g(H,_),$=g(H,", "),R=g(H,B),X=g(H,")"),H.forEach(f),ne=L(S),j=w(S,"DIV",{class:!0});var V=P(j);oe=g(V,"Temp: "),K=g(V,q),ae=g(V,", Press: "),Q=g(V,M),ce=g(V,`,
      Alt: `),W=g(V,y),V.forEach(f),re=L(S),O=w(S,"DIV",{class:!0});var T=P(O);ie=g(T,"NH3: "),Y=g(T,z),ue=g(T,", OXI: "),x=g(T,Z),he=g(T,", RED: "),ee=g(T,G),T.forEach(f),S.forEach(f),k.forEach(f),this.h()},h(){F(o,"class","card-title svelte-1igr9mo"),F(r,"class",""),F(v,"class",""),F(j,"class",""),F(O,"class",""),F(a,"class","card-content hide svelte-1igr9mo"),F(e,"class","card-container svelte-1igr9mo")},m(E,k){I(E,e,k),m(e,o),m(o,n),m(e,l),m(e,a),m(a,r),m(r,c),m(r,b),m(a,i),m(a,v),m(v,u),m(v,d),m(v,$),m(v,R),m(v,X),m(a,ne),m(a,j),m(j,oe),m(j,K),m(j,ae),m(j,Q),m(j,ce),m(j,W),m(a,re),m(a,O),m(O,ie),m(O,Y),m(O,ue),m(O,x),m(O,he),m(O,ee),me||(fe=Se(o,"click",s[1]),me=!0)},p(E,[k]){k&1&&t!==(t=new Date(E[0].timestamp).toISOString()+"")&&C(n,t),k&1&&h!==(h=E[0].pigeon+"")&&C(b,h),k&1&&_!==(_=E[0].lat.toFixed(4)+"")&&C(d,_),k&1&&B!==(B=E[0].lon.toFixed(4)+"")&&C(R,B),k&1&&q!==(q=E[0].temp.toFixed(2)+"")&&C(K,q),k&1&&M!==(M=E[0].pres.toFixed(2)+"")&&C(Q,M),k&1&&y!==(y=E[0].alti.toFixed(2)+"")&&C(W,y),k&1&&z!==(z=E[0].NH3+"")&&C(Y,z),k&1&&Z!==(Z=E[0].OXI+"")&&C(x,Z),k&1&&G!==(G=E[0].RED+"")&&C(ee,G)},i:N,o:N,d(E){E&&f(e),me=!1,fe()}}}function qe(s,e,o){let{measurement:t}=e;const n=l=>{var c;const r=(c=l.target.parentNode)==null?void 0:c.querySelector(".card-content");r==null||r.classList.toggle("hide")};return s.$$set=l=>{"measurement"in l&&o(0,t=l.measurement)},[t,n]}class Me extends je{constructor(e){super(),Oe(this,e,qe,Xe,Ie,{measurement:0})}}function ke(s,e,o){const t=s.slice();return t[9]=e[o],t}function Ee(s,e,o){const t=s.slice();return t[14]=e[o],t}function ye(s){let e,o=s[12].message+"",t;return{c(){e=D("p"),t=p(o),this.h()},l(n){e=w(n,"P",{style:!0});var l=P(e);t=g(l,o),l.forEach(f),this.h()},h(){Fe(e,"color","red")},m(n,l){I(n,e,l),m(e,t)},p(n,l){l&1&&o!==(o=n[12].message+"")&&C(t,o)},d(n){n&&f(e)}}}function ze(s){let e,o,t,n=se(s[13]),l=[];for(let a=0;a<n.length;a+=1)l[a]=De(Ee(s,n,a));return{c(){e=D("select");for(let a=0;a<l.length;a+=1)l[a].c()},l(a){e=w(a,"SELECT",{});var r=P(e);for(let c=0;c<l.length;c+=1)l[c].l(r);r.forEach(f)},m(a,r){I(a,e,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);o||(t=Se(e,"change",s[2]),o=!0)},p(a,r){if(r&17){n=se(a[13]);let c;for(c=0;c<n.length;c+=1){const h=Ee(a,n,c);l[c]?l[c].p(h,r):(l[c]=De(h),l[c].c(),l[c].m(e,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(a){a&&f(e),Ne(l,a),o=!1,t()}}}function De(s){let e,o=s[4](s[14])+"",t,n;return{c(){e=D("option"),t=p(o),this.h()},l(l){e=w(l,"OPTION",{});var a=P(e);t=g(a,o),a.forEach(f),this.h()},h(){e.__value=n=s[14],ge(e,e.__value)},m(l,a){I(l,e,a),m(e,t)},p(l,a){a&1&&o!==(o=l[4](l[14])+"")&&C(t,o),a&1&&n!==(n=l[14])&&(e.__value=n,ge(e,e.__value))},d(l){l&&f(e)}}}function Ze(s){let e,o="...waiting";return{c(){e=D("p"),e.textContent=o},l(t){e=w(t,"P",{"data-svelte-h":!0}),de(e)!=="svelte-mv6tav"&&(e.textContent=o)},m(t,n){I(t,e,n)},p:N,d(t){t&&f(e)}}}function Ge(s){let e,o=s[12].message+"",t;return{c(){e=D("p"),t=p(o),this.h()},l(n){e=w(n,"P",{style:!0});var l=P(e);t=g(l,o),l.forEach(f),this.h()},h(){Fe(e,"color","red")},m(n,l){I(n,e,l),m(e,t)},p(n,l){l&2&&o!==(o=n[12].message+"")&&C(t,o)},i:N,o:N,d(n){n&&f(e)}}}function Je(s){let e,o="Pigeons:",t,n,l=s[3](s[8]).join(", ")+"",a,r,c,h,b=se(s[8]),i=[];for(let u=0;u<b.length;u+=1)i[u]=we(ke(s,b,u));const v=u=>J(i[u],1,1,()=>{i[u]=null});return{c(){e=D("div"),e.textContent=o,t=A(),n=D("div"),a=p(l),r=A(),c=D("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l(u){e=w(u,"DIV",{"data-svelte-h":!0}),de(e)!=="svelte-nfdatt"&&(e.textContent=o),t=L(u),n=w(u,"DIV",{});var _=P(n);a=g(_,l),_.forEach(f),r=L(u),c=w(u,"DIV",{class:!0});var d=P(c);for(let $=0;$<i.length;$+=1)i[$].l(d);d.forEach(f),this.h()},h(){F(c,"class","cards-container svelte-1j7en9v")},m(u,_){I(u,e,_),I(u,t,_),I(u,n,_),m(n,a),I(u,r,_),I(u,c,_);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(c,null);h=!0},p(u,_){if((!h||_&2)&&l!==(l=u[3](u[8]).join(", ")+"")&&C(a,l),_&2){b=se(u[8]);let d;for(d=0;d<b.length;d+=1){const $=ke(u,b,d);i[d]?(i[d].p($,_),U(i[d],1)):(i[d]=we($),i[d].c(),U(i[d],1),i[d].m(c,null))}for(Pe(),d=b.length;d<i.length;d+=1)v(d);$e()}},i(u){if(!h){for(let _=0;_<b.length;_+=1)U(i[_]);h=!0}},o(u){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)J(i[_]);h=!1},d(u){u&&(f(e),f(t),f(n),f(r),f(c)),Ne(i,u)}}}function we(s){let e,o;return e=new Me({props:{measurement:s[9]}}),{c(){Be(e.$$.fragment)},l(t){Re(e.$$.fragment,t)},m(t,n){He(e,t,n),o=!0},p(t,n){const l={};n&2&&(l.measurement=t[9]),e.$set(l)},i(t){o||(U(e.$$.fragment,t),o=!0)},o(t){J(e.$$.fragment,t),o=!1},d(t){Ue(e,t)}}}function Ke(s){let e,o="...waiting";return{c(){e=D("p"),e.textContent=o},l(t){e=w(t,"P",{"data-svelte-h":!0}),de(e)!=="svelte-mv6tav"&&(e.textContent=o)},m(t,n){I(t,e,n)},p:N,i:N,o:N,d(t){t&&f(e)}}}function Qe(s){let e,o,t,n,l,a={ctx:s,current:null,token:null,hasCatch:!0,pending:Ze,then:ze,catch:ye,value:13,error:12};le(e=s[0],a);let r={ctx:s,current:null,token:null,hasCatch:!0,pending:Ke,then:Je,catch:Ge,value:8,error:12,blocks:[,,,]};return le(n=s[1],r),{c(){a.block.c(),o=A(),t=pe(),r.block.c()},l(c){a.block.l(c),o=L(c),t=pe(),r.block.l(c)},m(c,h){a.block.m(c,a.anchor=h),a.mount=()=>o.parentNode,a.anchor=o,I(c,o,h),I(c,t,h),r.block.m(c,r.anchor=h),r.mount=()=>t.parentNode,r.anchor=t,l=!0},p(c,[h]){s=c,a.ctx=s,h&1&&e!==(e=s[0])&&le(e,a)||be(a,s,h),r.ctx=s,h&2&&n!==(n=s[1])&&le(n,r)||be(r,s,h)},i(c){l||(U(r.block),l=!0)},o(c){for(let h=0;h<3;h+=1){const b=r.blocks[h];J(b)}l=!1},d(c){c&&(f(o),f(t)),a.block.d(c),a.token=null,a=null,r.block.d(c),r.token=null,r=null}}}const Ce="https://pigeonblog-db-default-rtdb.firebaseio.com";function We(s,e,o){const t=async i=>{const v=i+864e5,u=`${Ce}/measurements.json`,_=`orderBy="timestamp"&startAt=${i}&endAt=${v}`,$=await(await fetch(`${u}?${_}`)).json();return Object.values($).sort((R,X)=>R.timestamp-X.timestamp)},n=async()=>{const v=await(await fetch(`${Ce}/sessions.json`)).json();return Object.keys(v).map(_=>parseInt(_))},l=i=>{const v=i.target;c=parseInt(v.value),o(1,b=t(c))},a=i=>{const v=i.reduce((u,_)=>u.add(_.pigeon),new Set);return Array.from(v).sort()},r=i=>new Date(i).toLocaleDateString("en-us",{timeZone:"UTC",weekday:"long",year:"numeric",month:"short",day:"numeric"});let c,h=new Promise(()=>{}),b=new Promise(()=>{});return Le(async()=>{o(0,h=n()),h.then(i=>{c=i[0],o(1,b=t(c))})}),[h,b,l,a,r]}class et extends je{constructor(e){super(),Oe(this,e,We,Qe,Ie,{})}}export{et as component};
