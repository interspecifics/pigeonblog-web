import{i as Te,f as Ae,h as te,j as Le,s as Ie,n as V,o as Be}from"../chunks/scheduler.4b895fe1.js";import{p as Pe,t as J,b as $e,d as X,S as je,i as Oe,g as D,m as g,s as L,h as C,j as P,n as b,f as d,c as B,k as N,a as I,x as m,y as Se,o as w,e as pe,l as Ne,z as Ve,A as ge,B as fe,r as Re,u as He,v as Ue,w as Xe}from"../chunks/index.50a48fb0.js";function le(l,e){const o=e.token={};function t(n,s,a,c){if(e.token!==o)return;e.resolved=c;let r=e.ctx;a!==void 0&&(r=r.slice(),r[a]=c);const i=n&&(e.current=n)(r);let v=!1;e.block&&(e.blocks?e.blocks.forEach((u,p)=>{p!==s&&u&&(Pe(),J(u,1,1,()=>{e.blocks[p]===u&&(e.blocks[p]=null)}),$e())}):e.block.d(1),i.c(),X(i,1),i.m(e.mount(),e.anchor),v=!0),e.block=i,e.blocks&&(e.blocks[s]=i),v&&Le()}if(Te(l)){const n=Ae();if(l.then(s=>{te(n),t(e.then,1,e.value,s),te(null)},s=>{if(te(n),t(e.catch,2,e.error,s),te(null),!e.hasCatch)throw s}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,l),!0;e.resolved=l}}function be(l,e,o){const t=e.slice(),{resolved:n}=l;l.current===l.then&&(t[l.value]=n),l.current===l.catch&&(t[l.error]=n),l.block.p(t,o)}function se(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function qe(l){let e,o,t=l[2](l[0].timestamp)+"",n,s,a,c,r,i=l[0].pigeon+"",v,u,p,h,_=l[1](l[0].lat)+"",f,$,R=l[1](l[0].lon)+"",H,q,ne,j,ae,M=l[1](l[0].temp)+"",K,oe,y=l[1](l[0].pres)+"",Q,re,z=l[1](l[0].alti)+"",W,ce,O,ue,F=l[0].NH3+"",Y,ie,Z=l[0].OXI+"",x,he,G=l[0].RED+"",ee,me,de;return{c(){e=D("div"),o=D("button"),n=g(t),s=L(),a=D("div"),c=D("div"),r=g("Pigeon: "),v=g(i),u=L(),p=D("div"),h=g("Location: ("),f=g(_),$=g(", "),H=g(R),q=g(")"),ne=L(),j=D("div"),ae=g("Temp: "),K=g(M),oe=g(", Press: "),Q=g(y),re=g(", Alt: "),W=g(z),ce=L(),O=D("div"),ue=g("NH3: "),Y=g(F),ie=g(", OXI: "),x=g(Z),he=g(", RED: "),ee=g(G),this.h()},l(k){e=C(k,"DIV",{class:!0});var E=P(e);o=C(E,"BUTTON",{class:!0});var ve=P(o);n=b(ve,t),ve.forEach(d),s=B(E),a=C(E,"DIV",{class:!0});var S=P(a);c=C(S,"DIV",{class:!0});var _e=P(c);r=b(_e,"Pigeon: "),v=b(_e,i),_e.forEach(d),u=B(S),p=C(S,"DIV",{class:!0});var U=P(p);h=b(U,"Location: ("),f=b(U,_),$=b(U,", "),H=b(U,R),q=b(U,")"),U.forEach(d),ne=B(S),j=C(S,"DIV",{class:!0});var T=P(j);ae=b(T,"Temp: "),K=b(T,M),oe=b(T,", Press: "),Q=b(T,y),re=b(T,", Alt: "),W=b(T,z),T.forEach(d),ce=B(S),O=C(S,"DIV",{class:!0});var A=P(O);ue=b(A,"NH3: "),Y=b(A,F),ie=b(A,", OXI: "),x=b(A,Z),he=b(A,", RED: "),ee=b(A,G),A.forEach(d),S.forEach(d),E.forEach(d),this.h()},h(){N(o,"class","card-title svelte-1igr9mo"),N(c,"class",""),N(p,"class",""),N(j,"class",""),N(O,"class",""),N(a,"class","card-content hide svelte-1igr9mo"),N(e,"class","card-container svelte-1igr9mo")},m(k,E){I(k,e,E),m(e,o),m(o,n),m(e,s),m(e,a),m(a,c),m(c,r),m(c,v),m(a,u),m(a,p),m(p,h),m(p,f),m(p,$),m(p,H),m(p,q),m(a,ne),m(a,j),m(j,ae),m(j,K),m(j,oe),m(j,Q),m(j,re),m(j,W),m(a,ce),m(a,O),m(O,ue),m(O,Y),m(O,ie),m(O,x),m(O,he),m(O,ee),me||(de=Se(o,"click",l[3]),me=!0)},p(k,[E]){E&1&&t!==(t=k[2](k[0].timestamp)+"")&&w(n,t),E&1&&i!==(i=k[0].pigeon+"")&&w(v,i),E&1&&_!==(_=k[1](k[0].lat)+"")&&w(f,_),E&1&&R!==(R=k[1](k[0].lon)+"")&&w(H,R),E&1&&M!==(M=k[1](k[0].temp)+"")&&w(K,M),E&1&&y!==(y=k[1](k[0].pres)+"")&&w(Q,y),E&1&&z!==(z=k[1](k[0].alti)+"")&&w(W,z),E&1&&F!==(F=k[0].NH3+"")&&w(Y,F),E&1&&Z!==(Z=k[0].OXI+"")&&w(x,Z),E&1&&G!==(G=k[0].RED+"")&&w(ee,G)},i:V,o:V,d(k){k&&d(e),me=!1,de()}}}function Me(l,e,o){let{measurement:t}=e;const n=c=>c.toFixed(4),s=c=>new Date(c).toISOString(),a=c=>{var v;const i=(v=c.target.parentNode)==null?void 0:v.querySelector(".card-content");i==null||i.classList.toggle("hide")};return l.$$set=c=>{"measurement"in c&&o(0,t=c.measurement)},[t,n,s,a]}class ye extends je{constructor(e){super(),Oe(this,e,Me,qe,Ie,{measurement:0})}}function ke(l,e,o){const t=l.slice();return t[9]=e[o],t}function Ee(l,e,o){const t=l.slice();return t[14]=e[o],t}function ze(l){let e,o=l[12].message+"",t;return{c(){e=D("p"),t=g(o),this.h()},l(n){e=C(n,"P",{style:!0});var s=P(e);t=b(s,o),s.forEach(d),this.h()},h(){Ne(e,"color","red")},m(n,s){I(n,e,s),m(e,t)},p(n,s){s&1&&o!==(o=n[12].message+"")&&w(t,o)},d(n){n&&d(e)}}}function Fe(l){let e,o,t,n=se(l[13]),s=[];for(let a=0;a<n.length;a+=1)s[a]=De(Ee(l,n,a));return{c(){e=D("select");for(let a=0;a<s.length;a+=1)s[a].c()},l(a){e=C(a,"SELECT",{});var c=P(e);for(let r=0;r<s.length;r+=1)s[r].l(c);c.forEach(d)},m(a,c){I(a,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);o||(t=Se(e,"change",l[2]),o=!0)},p(a,c){if(c&17){n=se(a[13]);let r;for(r=0;r<n.length;r+=1){const i=Ee(a,n,r);s[r]?s[r].p(i,c):(s[r]=De(i),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},d(a){a&&d(e),Ve(s,a),o=!1,t()}}}function De(l){let e,o=l[4](l[14])+"",t,n;return{c(){e=D("option"),t=g(o),this.h()},l(s){e=C(s,"OPTION",{});var a=P(e);t=b(a,o),a.forEach(d),this.h()},h(){e.__value=n=l[14],ge(e,e.__value)},m(s,a){I(s,e,a),m(e,t)},p(s,a){a&1&&o!==(o=s[4](s[14])+"")&&w(t,o),a&1&&n!==(n=s[14])&&(e.__value=n,ge(e,e.__value))},d(s){s&&d(e)}}}function Ze(l){let e,o="...waiting";return{c(){e=D("p"),e.textContent=o},l(t){e=C(t,"P",{"data-svelte-h":!0}),fe(e)!=="svelte-mv6tav"&&(e.textContent=o)},m(t,n){I(t,e,n)},p:V,d(t){t&&d(e)}}}function Ge(l){let e,o=l[12].message+"",t;return{c(){e=D("p"),t=g(o),this.h()},l(n){e=C(n,"P",{style:!0});var s=P(e);t=b(s,o),s.forEach(d),this.h()},h(){Ne(e,"color","red")},m(n,s){I(n,e,s),m(e,t)},p(n,s){s&2&&o!==(o=n[12].message+"")&&w(t,o)},i:V,o:V,d(n){n&&d(e)}}}function Je(l){let e,o="Pigeons:",t,n,s=l[3](l[8]).join(", ")+"",a,c,r,i,v=se(l[8]),u=[];for(let h=0;h<v.length;h+=1)u[h]=Ce(ke(l,v,h));const p=h=>J(u[h],1,1,()=>{u[h]=null});return{c(){e=D("div"),e.textContent=o,t=L(),n=D("div"),a=g(s),c=L(),r=D("div");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){e=C(h,"DIV",{"data-svelte-h":!0}),fe(e)!=="svelte-nfdatt"&&(e.textContent=o),t=B(h),n=C(h,"DIV",{});var _=P(n);a=b(_,s),_.forEach(d),c=B(h),r=C(h,"DIV",{class:!0});var f=P(r);for(let $=0;$<u.length;$+=1)u[$].l(f);f.forEach(d),this.h()},h(){N(r,"class","cards-container svelte-1j7en9v")},m(h,_){I(h,e,_),I(h,t,_),I(h,n,_),m(n,a),I(h,c,_),I(h,r,_);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(r,null);i=!0},p(h,_){if((!i||_&2)&&s!==(s=h[3](h[8]).join(", ")+"")&&w(a,s),_&2){v=se(h[8]);let f;for(f=0;f<v.length;f+=1){const $=ke(h,v,f);u[f]?(u[f].p($,_),X(u[f],1)):(u[f]=Ce($),u[f].c(),X(u[f],1),u[f].m(r,null))}for(Pe(),f=v.length;f<u.length;f+=1)p(f);$e()}},i(h){if(!i){for(let _=0;_<v.length;_+=1)X(u[_]);i=!0}},o(h){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)J(u[_]);i=!1},d(h){h&&(d(e),d(t),d(n),d(c),d(r)),Ve(u,h)}}}function Ce(l){let e,o;return e=new ye({props:{measurement:l[9]}}),{c(){Re(e.$$.fragment)},l(t){He(e.$$.fragment,t)},m(t,n){Ue(e,t,n),o=!0},p(t,n){const s={};n&2&&(s.measurement=t[9]),e.$set(s)},i(t){o||(X(e.$$.fragment,t),o=!0)},o(t){J(e.$$.fragment,t),o=!1},d(t){Xe(e,t)}}}function Ke(l){let e,o="...waiting";return{c(){e=D("p"),e.textContent=o},l(t){e=C(t,"P",{"data-svelte-h":!0}),fe(e)!=="svelte-mv6tav"&&(e.textContent=o)},m(t,n){I(t,e,n)},p:V,i:V,o:V,d(t){t&&d(e)}}}function Qe(l){let e,o,t,n,s,a={ctx:l,current:null,token:null,hasCatch:!0,pending:Ze,then:Fe,catch:ze,value:13,error:12};le(e=l[0],a);let c={ctx:l,current:null,token:null,hasCatch:!0,pending:Ke,then:Je,catch:Ge,value:8,error:12,blocks:[,,,]};return le(n=l[1],c),{c(){a.block.c(),o=L(),t=pe(),c.block.c()},l(r){a.block.l(r),o=B(r),t=pe(),c.block.l(r)},m(r,i){a.block.m(r,a.anchor=i),a.mount=()=>o.parentNode,a.anchor=o,I(r,o,i),I(r,t,i),c.block.m(r,c.anchor=i),c.mount=()=>t.parentNode,c.anchor=t,s=!0},p(r,[i]){l=r,a.ctx=l,i&1&&e!==(e=l[0])&&le(e,a)||be(a,l,i),c.ctx=l,i&2&&n!==(n=l[1])&&le(n,c)||be(c,l,i)},i(r){s||(X(c.block),s=!0)},o(r){for(let i=0;i<3;i+=1){const v=c.blocks[i];J(v)}s=!1},d(r){r&&(d(o),d(t)),a.block.d(r),a.token=null,a=null,c.block.d(r),c.token=null,c=null}}}const we="https://pigeonblog-db-default-rtdb.firebaseio.com";function We(l,e,o){const t=async u=>{const p=u+864e5,h=`${we}/measurements.json`,_=`orderBy="timestamp"&startAt=${u}&endAt=${p}`,$=await(await fetch(`${h}?${_}`)).json();return Object.values($).sort((H,q)=>H.timestamp-q.timestamp)},n=async()=>{const p=await(await fetch(`${we}/sessions.json`)).json();return Object.keys(p).map(_=>parseInt(_))},s=u=>{const p=u.target;r=parseInt(p.value),o(1,v=t(r))},a=u=>{const p=u.reduce((h,_)=>h.add(_.pigeon),new Set);return Array.from(p).sort()},c=u=>new Date(u).toLocaleDateString("en-us",{timeZone:"UTC",weekday:"long",year:"numeric",month:"short",day:"numeric"});let r,i=new Promise(()=>{}),v=new Promise(()=>{});return Be(async()=>{o(0,i=n()),i.then(u=>{r=u[0],o(1,v=t(r))})}),[i,v,s,a,c]}class et extends je{constructor(e){super(),Oe(this,e,We,Qe,Ie,{})}}export{et as component};
