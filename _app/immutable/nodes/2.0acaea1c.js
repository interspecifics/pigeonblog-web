import{i as be,f as ke,h as G,j as Ee,s as he,n as y,o as De}from"../chunks/scheduler.4b895fe1.js";import{p as _e,t as q,b as me,d as P,S as de,i as fe,g as w,m as k,s as X,h as I,j as $,n as E,f as g,c as M,k as V,a as O,y as d,z as pe,o as j,e as le,x as ve,A as ge,B as ne,l as we,r as Ie,u as Ce,v as $e,w as Oe}from"../chunks/index.b3e3ff39.js";function ae(s,e){const a=e.token={};function l(t,r,n,c){if(e.token!==a)return;e.resolved=c;let o=e.ctx;n!==void 0&&(o=o.slice(),o[n]=c);const f=t&&(e.current=t)(o);let p=!1;e.block&&(e.blocks?e.blocks.forEach((v,i)=>{i!==r&&v&&(_e(),q(v,1,1,()=>{e.blocks[i]===v&&(e.blocks[i]=null)}),me())}):e.block.d(1),f.c(),P(f,1),f.m(e.mount(),e.anchor),p=!0),e.block=f,e.blocks&&(e.blocks[r]=f),p&&Ee()}if(be(s)){const t=ke();if(s.then(r=>{G(t),l(e.then,1,e.value,r),G(null)},r=>{if(G(t),l(e.catch,2,e.error,r),G(null),!e.hasCatch)throw r}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,s),!0;e.resolved=s}}function je(s,e,a){const l=e.slice(),{resolved:t}=s;s.current===s.then&&(l[s.value]=t),s.current===s.catch&&(l[s.error]=t),s.block.p(l,a)}function J(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Se(s){let e,a,l=s[2](s[0].timestamp)+"",t,r,n,c,o,f=s[0].pigeon+"",p,v,i,m,u=s[1](s[0].lat)+"",_,h,S=s[1](s[0].lon)+"",T,K,Q,C,W,R=s[0].NH3+"",z,Y,A=s[0].OXI+"",F,Z,B=s[0].RED+"",U,x,te;return{c(){e=w("div"),a=w("div"),t=k(l),r=X(),n=w("div"),c=w("div"),o=k("Pigeon: "),p=k(f),v=X(),i=w("div"),m=k("Loc: ("),_=k(u),h=k(", "),T=k(S),K=k(")"),Q=X(),C=w("div"),W=k("NH3: "),z=k(R),Y=k(", OXI: "),F=k(A),Z=k(", RED: "),U=k(B),this.h()},l(b){e=I(b,"DIV",{class:!0});var D=$(e);a=I(D,"DIV",{class:!0});var se=$(a);t=E(se,l),se.forEach(g),r=M(D),n=I(D,"DIV",{class:!0});var H=$(n);c=I(H,"DIV",{class:!0});var ee=$(c);o=E(ee,"Pigeon: "),p=E(ee,f),ee.forEach(g),v=M(H),i=I(H,"DIV",{class:!0});var L=$(i);m=E(L,"Loc: ("),_=E(L,u),h=E(L,", "),T=E(L,S),K=E(L,")"),L.forEach(g),Q=M(H),C=I(H,"DIV",{class:!0});var N=$(C);W=E(N,"NH3: "),z=E(N,R),Y=E(N,", OXI: "),F=E(N,A),Z=E(N,", RED: "),U=E(N,B),N.forEach(g),H.forEach(g),D.forEach(g),this.h()},h(){V(a,"class","card-title svelte-176xp44"),V(c,"class",""),V(i,"class",""),V(C,"class",""),V(n,"class","card-content hide svelte-176xp44"),V(e,"class","card-container svelte-176xp44")},m(b,D){O(b,e,D),d(e,a),d(a,t),d(e,r),d(e,n),d(n,c),d(c,o),d(c,p),d(n,v),d(n,i),d(i,m),d(i,_),d(i,h),d(i,T),d(i,K),d(n,Q),d(n,C),d(C,W),d(C,z),d(C,Y),d(C,F),d(C,Z),d(C,U),x||(te=pe(a,"click",s[3]),x=!0)},p(b,[D]){D&1&&l!==(l=b[2](b[0].timestamp)+"")&&j(t,l),D&1&&f!==(f=b[0].pigeon+"")&&j(p,f),D&1&&u!==(u=b[1](b[0].lat)+"")&&j(_,u),D&1&&S!==(S=b[1](b[0].lon)+"")&&j(T,S),D&1&&R!==(R=b[0].NH3+"")&&j(z,R),D&1&&A!==(A=b[0].OXI+"")&&j(F,A),D&1&&B!==(B=b[0].RED+"")&&j(U,B)},i:y,o:y,d(b){b&&g(e),x=!1,te()}}}function Ne(s,e,a){let{measurement:l}=e;const t=c=>c.toFixed(4),r=c=>new Date(c).toISOString(),n=c=>{c.target.parentNode.querySelector(".card-content").classList.toggle("hide")};return s.$$set=c=>{"measurement"in c&&a(0,l=c.measurement)},[l,t,r,n]}class Ve extends de{constructor(e){super(),fe(this,e,Ne,Se,he,{measurement:0})}}function ce(s,e,a){const l=s.slice();return l[8]=e[a],l}function oe(s,e,a){const l=s.slice();return l[12]=e[a],l}function re(s){let e,a=s[3](s[12])+"",l,t;return{c(){e=w("option"),l=k(a),this.h()},l(r){e=I(r,"OPTION",{});var n=$(e);l=E(n,a),n.forEach(g),this.h()},h(){e.__value=t=s[12],ne(e,e.__value)},m(r,n){O(r,e,n),d(e,l)},p(r,n){n&1&&a!==(a=r[3](r[12])+"")&&j(l,a),n&1&&t!==(t=r[12])&&(e.__value=t,ne(e,e.__value))},d(r){r&&g(e)}}}function ye(s){let e,a=s[11].message+"",l;return{c(){e=w("p"),l=k(a),this.h()},l(t){e=I(t,"P",{style:!0});var r=$(e);l=E(r,a),r.forEach(g),this.h()},h(){we(e,"color","red")},m(t,r){O(t,e,r),d(e,l)},p(t,r){r&2&&a!==(a=t[11].message+"")&&j(l,a)},i:y,o:y,d(t){t&&g(e)}}}function He(s){let e,a,l=J(s[7]),t=[];for(let n=0;n<l.length;n+=1)t[n]=ue(ce(s,l,n));const r=n=>q(t[n],1,1,()=>{t[n]=null});return{c(){e=w("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=I(n,"DIV",{class:!0});var c=$(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(g),this.h()},h(){V(e,"class","cards-container svelte-1j7en9v")},m(n,c){O(n,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);a=!0},p(n,c){if(c&2){l=J(n[7]);let o;for(o=0;o<l.length;o+=1){const f=ce(n,l,o);t[o]?(t[o].p(f,c),P(t[o],1)):(t[o]=ue(f),t[o].c(),P(t[o],1),t[o].m(e,null))}for(_e(),o=l.length;o<t.length;o+=1)r(o);me()}},i(n){if(!a){for(let c=0;c<l.length;c+=1)P(t[c]);a=!0}},o(n){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)q(t[c]);a=!1},d(n){n&&g(e),ge(t,n)}}}function ue(s){let e,a;return e=new Ve({props:{measurement:s[8]}}),{c(){Ie(e.$$.fragment)},l(l){Ce(e.$$.fragment,l)},m(l,t){$e(e,l,t),a=!0},p(l,t){const r={};t&2&&(r.measurement=l[8]),e.$set(r)},i(l){a||(P(e.$$.fragment,l),a=!0)},o(l){q(e.$$.fragment,l),a=!1},d(l){Oe(e,l)}}}function Le(s){let e,a="...waiting";return{c(){e=w("p"),e.textContent=a},l(l){e=I(l,"P",{"data-svelte-h":!0}),ve(e)!=="svelte-mv6tav"&&(e.textContent=a)},m(l,t){O(l,e,t)},p:y,i:y,o:y,d(l){l&&g(e)}}}function Pe(s){let e,a="HOME",l,t,r,n,c,o,f,p,v=J(s[0]),i=[];for(let u=0;u<v.length;u+=1)i[u]=re(oe(s,v,u));let m={ctx:s,current:null,token:null,hasCatch:!0,pending:Le,then:He,catch:ye,value:7,error:11,blocks:[,,,]};return ae(c=s[1],m),{c(){e=w("h2"),e.textContent=a,l=X(),t=w("select");for(let u=0;u<i.length;u+=1)i[u].c();r=X(),n=le(),m.block.c()},l(u){e=I(u,"H2",{"data-svelte-h":!0}),ve(e)!=="svelte-1f0wd99"&&(e.textContent=a),l=M(u),t=I(u,"SELECT",{});var _=$(t);for(let h=0;h<i.length;h+=1)i[h].l(_);_.forEach(g),r=M(u),n=le(),m.block.l(u)},m(u,_){O(u,e,_),O(u,l,_),O(u,t,_);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(t,null);O(u,r,_),O(u,n,_),m.block.m(u,m.anchor=_),m.mount=()=>n.parentNode,m.anchor=n,o=!0,f||(p=pe(t,"change",s[2]),f=!0)},p(u,[_]){if(s=u,_&9){v=J(s[0]);let h;for(h=0;h<v.length;h+=1){const S=oe(s,v,h);i[h]?i[h].p(S,_):(i[h]=re(S),i[h].c(),i[h].m(t,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=v.length}m.ctx=s,_&2&&c!==(c=s[1])&&ae(c,m)||je(m,s,_)},i(u){o||(P(m.block),o=!0)},o(u){for(let _=0;_<3;_+=1){const h=m.blocks[_];q(h)}o=!1},d(u){u&&(g(e),g(l),g(t),g(r),g(n)),ge(i,u),m.block.d(u),m.token=null,m=null,f=!1,p()}}}const ie="https://pigeonblog-db-default-rtdb.firebaseio.com";function Re(s,e,a){const l=async p=>{p=p||1;const v=p+24*60*60*1e3,m=await(await fetch(`${ie}/measurements.json?orderBy="timestamp"&startAt=${p}&endAt=${v}`)).json();return Object.keys(m).map(_=>m[_]).sort((_,h)=>_.timestamp-h.timestamp)},t=async()=>{const v=await(await fetch(`${ie}/sessions.json`)).json();return Object.keys(v).map(m=>parseInt(m))},r=p=>{const v=p.target;a(4,c=parseInt(v.value))},n=p=>new Date(p).toLocaleDateString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric"});let c=0,o=[],f;return De(async()=>{a(0,o=await t()),a(4,c=o[0])}),s.$$.update=()=>{s.$$.dirty&16&&a(1,f=l(c))},[o,f,r,n,c]}class Xe extends de{constructor(e){super(),fe(this,e,Re,Pe,he,{})}}export{Xe as component};
