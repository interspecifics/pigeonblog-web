import{i as be,f as ke,h as Z,j as Ee,s as he,n as H,o as De}from"../chunks/scheduler.4b895fe1.js";import{p as me,t as M,b as _e,d as V,S as de,i as fe,g as w,m as k,s as A,h as C,j as $,n as E,f as g,c as X,k as y,a as O,y as f,z as pe,o as j,e as le,x as ve,A as ge,B as ne,l as we,r as Ce,u as Ie,v as $e,w as Oe}from"../chunks/index.b3e3ff39.js";function ae(s,e){const a=e.token={};function l(t,r,n,o){if(e.token!==a)return;e.resolved=o;let c=e.ctx;n!==void 0&&(c=c.slice(),c[n]=o);const _=t&&(e.current=t)(c);let p=!1;e.block&&(e.blocks?e.blocks.forEach((v,i)=>{i!==r&&v&&(me(),M(v,1,1,()=>{e.blocks[i]===v&&(e.blocks[i]=null)}),_e())}):e.block.d(1),_.c(),V(_,1),_.m(e.mount(),e.anchor),p=!0),e.block=_,e.blocks&&(e.blocks[r]=_),p&&Ee()}if(be(s)){const t=ke();if(s.then(r=>{Z(t),l(e.then,1,e.value,r),Z(null)},r=>{if(Z(t),l(e.catch,2,e.error,r),Z(null),!e.hasCatch)throw r}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,s),!0;e.resolved=s}}function je(s,e,a){const l=e.slice(),{resolved:t}=s;s.current===s.then&&(l[s.value]=t),s.current===s.catch&&(l[s.error]=t),s.block.p(l,a)}function G(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Se(s){let e,a,l=s[2](s[0].timestamp)+"",t,r,n,o,c,_=s[0].pigeon+"",p,v,i,d,u=s[1](s[0].lat)+"",m,h,S=s[1](s[0].lon)+"",U,J,K,I,Q,B=s[0].NH3+"",q,W,R=s[0].OXI+"",z,Y,T=s[0].RED+"",F,x,te;return{c(){e=w("div"),a=w("button"),t=k(l),r=A(),n=w("div"),o=w("div"),c=k("Pigeon: "),p=k(_),v=A(),i=w("div"),d=k("Loc: ("),m=k(u),h=k(", "),U=k(S),J=k(")"),K=A(),I=w("div"),Q=k("NH3: "),q=k(B),W=k(", OXI: "),z=k(R),Y=k(", RED: "),F=k(T),this.h()},l(b){e=C(b,"DIV",{class:!0});var D=$(e);a=C(D,"BUTTON",{class:!0});var se=$(a);t=E(se,l),se.forEach(g),r=X(D),n=C(D,"DIV",{class:!0});var L=$(n);o=C(L,"DIV",{class:!0});var ee=$(o);c=E(ee,"Pigeon: "),p=E(ee,_),ee.forEach(g),v=X(L),i=C(L,"DIV",{class:!0});var P=$(i);d=E(P,"Loc: ("),m=E(P,u),h=E(P,", "),U=E(P,S),J=E(P,")"),P.forEach(g),K=X(L),I=C(L,"DIV",{class:!0});var N=$(I);Q=E(N,"NH3: "),q=E(N,B),W=E(N,", OXI: "),z=E(N,R),Y=E(N,", RED: "),F=E(N,T),N.forEach(g),L.forEach(g),D.forEach(g),this.h()},h(){y(a,"class","card-title svelte-1igr9mo"),y(o,"class",""),y(i,"class",""),y(I,"class",""),y(n,"class","card-content hide svelte-1igr9mo"),y(e,"class","card-container svelte-1igr9mo")},m(b,D){O(b,e,D),f(e,a),f(a,t),f(e,r),f(e,n),f(n,o),f(o,c),f(o,p),f(n,v),f(n,i),f(i,d),f(i,m),f(i,h),f(i,U),f(i,J),f(n,K),f(n,I),f(I,Q),f(I,q),f(I,W),f(I,z),f(I,Y),f(I,F),x||(te=pe(a,"click",s[3]),x=!0)},p(b,[D]){D&1&&l!==(l=b[2](b[0].timestamp)+"")&&j(t,l),D&1&&_!==(_=b[0].pigeon+"")&&j(p,_),D&1&&u!==(u=b[1](b[0].lat)+"")&&j(m,u),D&1&&S!==(S=b[1](b[0].lon)+"")&&j(U,S),D&1&&B!==(B=b[0].NH3+"")&&j(q,B),D&1&&R!==(R=b[0].OXI+"")&&j(z,R),D&1&&T!==(T=b[0].RED+"")&&j(F,T)},i:H,o:H,d(b){b&&g(e),x=!1,te()}}}function Ne(s,e,a){let{measurement:l}=e;const t=o=>o.toFixed(4),r=o=>new Date(o).toISOString(),n=o=>{var p;const _=(p=o.target.parentNode)==null?void 0:p.querySelector(".card-content");_==null||_.classList.toggle("hide")};return s.$$set=o=>{"measurement"in o&&a(0,l=o.measurement)},[l,t,r,n]}class ye extends de{constructor(e){super(),fe(this,e,Ne,Se,he,{measurement:0})}}function oe(s,e,a){const l=s.slice();return l[8]=e[a],l}function ce(s,e,a){const l=s.slice();return l[12]=e[a],l}function re(s){let e,a=s[3](s[12])+"",l,t;return{c(){e=w("option"),l=k(a),this.h()},l(r){e=C(r,"OPTION",{});var n=$(e);l=E(n,a),n.forEach(g),this.h()},h(){e.__value=t=s[12],ne(e,e.__value)},m(r,n){O(r,e,n),f(e,l)},p(r,n){n&1&&a!==(a=r[3](r[12])+"")&&j(l,a),n&1&&t!==(t=r[12])&&(e.__value=t,ne(e,e.__value))},d(r){r&&g(e)}}}function He(s){let e,a=s[11].message+"",l;return{c(){e=w("p"),l=k(a),this.h()},l(t){e=C(t,"P",{style:!0});var r=$(e);l=E(r,a),r.forEach(g),this.h()},h(){we(e,"color","red")},m(t,r){O(t,e,r),f(e,l)},p(t,r){r&2&&a!==(a=t[11].message+"")&&j(l,a)},i:H,o:H,d(t){t&&g(e)}}}function Le(s){let e,a,l=G(s[7]),t=[];for(let n=0;n<l.length;n+=1)t[n]=ue(oe(s,l,n));const r=n=>M(t[n],1,1,()=>{t[n]=null});return{c(){e=w("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=C(n,"DIV",{class:!0});var o=$(e);for(let c=0;c<t.length;c+=1)t[c].l(o);o.forEach(g),this.h()},h(){y(e,"class","cards-container svelte-1j7en9v")},m(n,o){O(n,e,o);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);a=!0},p(n,o){if(o&2){l=G(n[7]);let c;for(c=0;c<l.length;c+=1){const _=oe(n,l,c);t[c]?(t[c].p(_,o),V(t[c],1)):(t[c]=ue(_),t[c].c(),V(t[c],1),t[c].m(e,null))}for(me(),c=l.length;c<t.length;c+=1)r(c);_e()}},i(n){if(!a){for(let o=0;o<l.length;o+=1)V(t[o]);a=!0}},o(n){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)M(t[o]);a=!1},d(n){n&&g(e),ge(t,n)}}}function ue(s){let e,a;return e=new ye({props:{measurement:s[8]}}),{c(){Ce(e.$$.fragment)},l(l){Ie(e.$$.fragment,l)},m(l,t){$e(e,l,t),a=!0},p(l,t){const r={};t&2&&(r.measurement=l[8]),e.$set(r)},i(l){a||(V(e.$$.fragment,l),a=!0)},o(l){M(e.$$.fragment,l),a=!1},d(l){Oe(e,l)}}}function Pe(s){let e,a="...waiting";return{c(){e=w("p"),e.textContent=a},l(l){e=C(l,"P",{"data-svelte-h":!0}),ve(e)!=="svelte-mv6tav"&&(e.textContent=a)},m(l,t){O(l,e,t)},p:H,i:H,o:H,d(l){l&&g(e)}}}function Ve(s){let e,a="HOME",l,t,r,n,o,c,_,p,v=G(s[0]),i=[];for(let u=0;u<v.length;u+=1)i[u]=re(ce(s,v,u));let d={ctx:s,current:null,token:null,hasCatch:!0,pending:Pe,then:Le,catch:He,value:7,error:11,blocks:[,,,]};return ae(o=s[1],d),{c(){e=w("h2"),e.textContent=a,l=A(),t=w("select");for(let u=0;u<i.length;u+=1)i[u].c();r=A(),n=le(),d.block.c()},l(u){e=C(u,"H2",{"data-svelte-h":!0}),ve(e)!=="svelte-1f0wd99"&&(e.textContent=a),l=X(u),t=C(u,"SELECT",{});var m=$(t);for(let h=0;h<i.length;h+=1)i[h].l(m);m.forEach(g),r=X(u),n=le(),d.block.l(u)},m(u,m){O(u,e,m),O(u,l,m),O(u,t,m);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(t,null);O(u,r,m),O(u,n,m),d.block.m(u,d.anchor=m),d.mount=()=>n.parentNode,d.anchor=n,c=!0,_||(p=pe(t,"change",s[2]),_=!0)},p(u,[m]){if(s=u,m&9){v=G(s[0]);let h;for(h=0;h<v.length;h+=1){const S=ce(s,v,h);i[h]?i[h].p(S,m):(i[h]=re(S),i[h].c(),i[h].m(t,null))}for(;h<i.length;h+=1)i[h].d(1);i.length=v.length}d.ctx=s,m&2&&o!==(o=s[1])&&ae(o,d)||je(d,s,m)},i(u){c||(V(d.block),c=!0)},o(u){for(let m=0;m<3;m+=1){const h=d.blocks[m];M(h)}c=!1},d(u){u&&(g(e),g(l),g(t),g(r),g(n)),ge(i,u),d.block.d(u),d.token=null,d=null,_=!1,p()}}}const ie="https://pigeonblog-db-default-rtdb.firebaseio.com";function Be(s,e,a){const l=async p=>{p=p||1;const v=p+24*60*60*1e3,d=await(await fetch(`${ie}/measurements.json?orderBy="timestamp"&startAt=${p}&endAt=${v}`)).json();return Object.keys(d).map(m=>d[m]).sort((m,h)=>m.timestamp-h.timestamp)},t=async()=>{const v=await(await fetch(`${ie}/sessions.json`)).json();return Object.keys(v).map(d=>parseInt(d))},r=p=>{const v=p.target;a(4,o=parseInt(v.value))},n=p=>new Date(p).toLocaleDateString("en-us",{timeZone:"UTC",weekday:"long",year:"numeric",month:"short",day:"numeric"});let o=0,c=[],_;return De(async()=>{a(0,c=await t()),a(4,o=c[0])}),s.$$.update=()=>{s.$$.dirty&16&&a(1,_=l(o))},[c,_,r,n,o]}class Ae extends de{constructor(e){super(),fe(this,e,Be,Ve,he,{})}}export{Ae as component};
